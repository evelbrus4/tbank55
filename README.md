# ü§ñ –¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –¥–ª—è –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–π

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ—å—é—á–µ—Ä—Å–æ–≤, –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
TINKOFF_TOKEN=your_token_here
```

**–ì–¥–µ –≤–∑—è—Ç—å —Ç–æ–∫–µ–Ω:**
1. –ó–∞–π–¥–∏—Ç–µ –≤ [Tinkoff Invest](https://www.tinkoff.ru/invest/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞
python main.py
```

### 4. –ó–∞–ø—É—Å–∫ –≤–µ–±-–¥–∞—à–±–æ—Ä–¥–∞

```bash
# –ó–∞–ø—É—Å–∫ Streamlit –¥–∞—à–±–æ—Ä–¥–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
streamlit run src/web/dashboard.py
```

–î–∞—à–±–æ—Ä–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8501`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bott/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/              # API –∫–ª–∏–µ–Ω—Ç—ã –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Instrument, Candle, Order, Portfolio)
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø—Ä–µ—Å–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/             # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ storage/          # –•—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ analysis/         # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã (slippage, spread, risk manager)
‚îÇ   ‚îî‚îÄ‚îÄ web/              # Web –¥–∞—à–±–æ—Ä–¥
‚îú‚îÄ‚îÄ data/                 # –î–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ —Ä—ã–Ω–∫–∞ (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ main.py               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .env                  # –¢–æ–∫–µ–Ω—ã (–Ω–µ –≤ git)
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `src/config/trading_config.py`:

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã:

```python
# –í —Ñ–∞–π–ª–µ src/config/trading_config.py –∏–∑–º–µ–Ω–∏—Ç–µ:
ACTIVE_CONFIG = TradingConfig        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
# ACTIVE_CONFIG = ConservativeConfig # –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è (–º–µ–Ω—å—à–µ —Ä–∏—Å–∫–æ–≤)
# ACTIVE_CONFIG = AggressiveConfig   # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è (–±–æ–ª—å—à–µ —Ä–∏—Å–∫–æ–≤)
# ACTIVE_CONFIG = TestingConfig      # –¢–µ—Å—Ç–æ–≤–∞—è (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:** 200,000 ‚ÇΩ
- **–ö–æ–º–∏—Å—Å–∏—è:** 0.05%
- **–ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ:** 0.02% (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–°–ø—Ä–µ–¥:** 0.03% (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞:** 20%
- **–†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É:** 2%
- **–ú–∞–∫—Å. –ø–æ–∑–∏—Ü–∏–π:** 5

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

- üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å API –¢–∏–Ω—å–∫–æ—Ñ—Ñ
- üìà –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ—å—é—á–µ—Ä—Å–æ–≤ –∏ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
- üí∞ –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º P&L
- üéØ –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (—Å—Ç–æ–ø-–ª–æ—Å—Å—ã, —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã, –ª–∏–º–∏—Ç—ã)
- üìâ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (–ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ, —Å–ø—Ä–µ–¥, –∑–∞–¥–µ—Ä–∂–∫–∏)
- üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Sharpe Ratio, Win Rate, Drawdown)
- üåê Web –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚è∞ –¢–æ—Ä–≥–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- üîî –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### üé® –î–∞—à–±–æ—Ä–¥ –≤–∫–ª—é—á–∞–µ—Ç:

- üìä –û–±–∑–æ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è –∏ –±–∞–ª–∞–Ω—Å–∞
- üìà –ì—Ä–∞—Ñ–∏–∫ P&L
- üíº –°–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- üìú –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üìâ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º:

```python
import asyncio
from src.core.bot import TInvestBot
from datetime import datetime, timedelta
from t_tech.invest import CandleInterval

async def main():
    token = "your_token_here"
    
    async with TInvestBot(token) as bot:
        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ID —Å—á–µ—Ç–∞
        bot.set_account_id("your_account_id")
        
        # –ü–æ–ª—É—á–∏—Ç—å —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –∞–∫—Ü–∏–∏
        shares = await bot.get_russian_shares()
        print(f"–ù–∞–π–¥–µ–Ω–æ –∞–∫—Ü–∏–π: {len(shares)}")
        
        # –ü–æ–ª—É—á–∏—Ç—å —Å–≤–µ—á–∏
        figi = shares[0].figi
        to_date = datetime.now()
        from_date = to_date - timedelta(days=7)
        
        candles = await bot.get_candles_list(
            figi=figi,
            from_date=from_date,
            to_date=to_date,
            interval=CandleInterval.CANDLE_INTERVAL_HOUR
        )
        
        # –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Ü–µ–Ω—É
        price = await bot.get_last_price(figi)
        print(f"–¶–µ–Ω–∞: {price}")
        
        # –ö—É–ø–∏—Ç—å –ø–æ —Ä—ã–Ω–∫—É
        order = await bot.buy_market(figi, quantity=1)
        print(f"–û—Ä–¥–µ—Ä —Å–æ–∑–¥–∞–Ω: {order.order_id}")

asyncio.run(main())
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `src/strategies/`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `analyze()` –∏ `generate_signals()`
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ `main.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `src/api/endpoints/`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
3. –î–æ–±–∞–≤—å—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ `TinkoffClient`

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å —É—Ä–æ–≤–Ω—è–º–∏:
- `INFO` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- `WARNING` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –æ—à–∏–±–∫–∏

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `src/config/trading_config.py`:

```python
GENERAL_CONFIG = {
    'log_level': 'INFO'  # DEBUG, INFO, WARNING, ERROR
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª** —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –ø–∞–ø–∫—É `data/`** —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ sandbox** –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** –¥–ª—è –∑–∞—â–∏—Ç—ã –∫–∞–ø–∏—Ç–∞–ª–∞
- **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–º–∏—Å—Å–∏—è–º–∏** –∏ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ–º

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∏ –º–æ–¥–µ–ª–µ–π](docs/API_STRUCTURE.md)
- [Tinkoff Invest API](https://tinkoff.github.io/investAPI/)
- [–ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è](docs/MARGIN_TRADING.md)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ—Ä–≥–æ–≤–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

**–í–Ω–∏–º–∞–Ω–∏–µ:** –¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä—ã–Ω–∫–∞—Ö —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å —Ä–∏—Å–∫–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç–∞ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.
